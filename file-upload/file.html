<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文件上传</title>
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="/bower_components/bootstrap-fileinput/css/fileinput.css">
</head>
<body>
    <div class="container">
        <div class="raw">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <form action="" method="POST" enctype="multipart/form-data" role="form" class="form-horizontal">
                    <div class="form-group">
                        <label for="" class="col-md-2 control-label">选择文件</label>
                        <div class="col-md-6">
                            <input type="file" name="file[]" class="file" id="file_upload">
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-2">
                <img id="preview">
            </div>
        </div>
    </div>
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="/bower_components/bootstrap-fileinput/js/fileinput.min.js"></script>
    <script>
        $(function() {
            // $("#file_upload").change(function() {
            //     var $file = $(this);
            //     var fileObj = this;
            //     var windowURL = window.URL || window.webkitURL;
            //     var dataURL;
            //     var $img = $("#preview");

            //     if(fileObj && fileObj.files && fileObj.files[0]){
            //         dataURL = windowURL.createObjectURL(fileObj.files[0]);
            //         $img.attr('src',dataURL);
            //     } else {
            //         dataURL = $file.val();
    
            //         var imgObj = document.getElementById("preview");
            //         // 两个坑:
            //         // 1、在设置filter属性时，元素必须已经存在在DOM树中，动态创建的Node，也需要在设置属性前加入到DOM中，先设置属性在加入，无效；
            //         // 2、src属性需要像下面的方式添加，上面的两种方式添加，无效；
            //         imgObj.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
            //         imgObj.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = dataURL;
            //     }
            // });
        });
    </script>
</body>
</html>